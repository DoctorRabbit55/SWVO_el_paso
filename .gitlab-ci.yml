---
# Need to use alternative to this image. A basic python image with venv should make the job
image: continuumio/miniconda3:latest

variables:
  PRODUCTION_BRANCH: PAGER-production
  PRE_RELEASE_BRANCH: PAGER-dev
  REGISTER: localhost

before_script:
  - cd /builds/pager-wp8/data_management/
  - bash install.sh

stages:
  - unit-tests
  - integration-tests
  - test-build
  - deployment

unittest:
  stage: unit-tests
  tags:
    - Deployment
  script:
    - cd /builds/pager-wp8/data_management/tests/unittests
    - echo "Running unittests for data_management"
    - pytest .